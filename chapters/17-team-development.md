# チーム開発（Git/PR/コードレビュー）

案件参画でまず求められるのは「Androidが書ける」より、**チームの流儀で安全に変更できる**ことです。
この章では、実務で最低限必要な Git/PR/レビュー の型をまとめます。

---

## 前提

- [デバッグと調査（実務の型）](./16-debugging.md) を完了し、調査→修正→回帰防止の型がある

## この章でできるようになること

- [ ] ブランチ運用（feature/fix）を理解し、迷わずPRを出せる
- [ ] 小さく安全な差分に分けてコミットできる
- [ ] PR本文に「判断材料」を揃えられる（スクショ/テスト/リスク）
- [ ] レビュー指摘を、意図を崩さずに反映できる
- [ ] マージ後の監視・フォロー（リリース/不具合対応）を意識できる

**所要時間の目安：1〜2時間**

---

## まず押さえる：変更の出し方（安全第一）

### 変更は小さく分ける

- 機能追加 + リファクタ + 依存更新を混ぜない
- 「UIだけ」「ロジックだけ」「テストだけ」を分けられると強い

### コミットの粒度

目安：レビューで差分が追える単位

- `Add memo search UI`
- `Implement search in ViewModel`
- `Add tests for search behavior`

---

## PRに書くべきこと（テンプレ）

以下が揃うと、レビューが速くなり、事故が減ります。

### 1) 目的（なぜ）

- どの課題を解決するのか（チケット/背景）

### 2) 変更内容（なにを）

- 画面/アーキテクチャ/データ層で何が変わったか

### 3) 動作確認（どう確かめたか）

- 手動：操作手順（3〜5行）
- テスト：追加したテスト / 実行したコマンド

例：

- `./gradlew testDebugUnitTest`
- `./gradlew connectedDebugAndroidTest`

### 4) スクショ（UI変更がある場合）

- Before/After（1枚ずつで十分）

### 5) リスクとフォロー

- 影響範囲（例：既存の一覧/検索）
- 既知の懸念（例：大量データ時の性能）
- 追加でやること（Follow-up）

---

## レビューでよく見られる観点（実務で落ちやすい）

- 責務が混ざっていないか（UIでビジネスロジックをやっていないか）
- 状態とイベントが破綻していないか（Loading/エラー/二重送信）
- エラー時にユーザーが詰まないか（リトライ/メッセージ）
- テストで守るべきところを守れているか
- 命名がドメインを表しているか（`data`, `item` だらけになっていないか）

---

## チームで効く習慣

- 先に「設計メモ」を書く（1画面なら箇条書きで十分）
- 早めにドラフトPRを出す（方向性の合意が取れる）
- 迷ったら「差分を小さくして相談」する

---

## 演習

「メモ一覧に検索機能を追加する」想定で、以下を作ってみてください。

- PRタイトル（短く、命令形）
- PR本文（目的/変更内容/動作確認/スクショ/リスク）
- レビュアーからの指摘を2つ想定し、返答案を用意する

---

## AIに聞いてみよう

### 質問テンプレ（コピペ）

```text
【前提】
この章を学習しています（この章のコンテキストは共有済み）。

【やりたいこと】
（例：PRの説明を良くしたい / レビューに強い差分にしたい / 相談の仕方を知りたい）

【今の状態】
- 変更内容：
- 影響範囲：
- 確認手順：

【欲しい回答】
- PR本文の改善案
- レビューで突っ込まれそうな点
- 追加でやると良い確認（テスト/スクショ）
```

```text
【質問】
この変更内容をPR本文にまとめたい。
レビュアーが判断しやすい構成に整えて、リスクと確認観点も足して。
```

---

## 課題提出

この章には提出課題があります。

1. 上記の演習を完了する
2. GitHub で `feature/17-team-development` ブランチを作成し、PRを作成
3. [AI総合レビューツール](https://ai.studio/apps/drive/1AMqIqU4Bio4te7AWh5dly1Qzp7CesqP9?fullscreenApplet=true) でレビューを実行
4. 問題がなければ、スプレッドシートに **PR URL** と **完了日** を記入

---

## ふりかえり

- PR説明で、判断材料として足りなかったものは何？
- 差分を小さくするために、どう分割すると良い？
- レビュー指摘を受けたとき、意図を守るために何を確認する？

---

## 次の章

次は [CIで品質を担保する（Gradle/テスト/Lint）](./18-ci.md) に進み、CIで品質を担保する型を作りましょう。
