# Unit 5: データ永続化（ガイド）

Unit 5では、アプリの価値を支える **永続化（Room/DataStore）** を扱います。アプリを閉じてもデータが残る状態を作ります。

---

## 前提

- Unit 4まで完了し、Repository経由でデータを扱える

## この章でできるようになること

- RoomでCRUDを実装し、Repositoryの裏側に隠せる
- DataStoreで設定（並び替えなど）を保存できる
- オフラインでも破綻しない状態設計ができる

---

## このユニットでやること（レッスン）

- 永続化：`chapters/11-storage.md`

---

## チェックポイント（完了条件）

- [ ] アプリ再起動後もメモが残る
- [ ] 取得/保存/更新/削除がRepository越しに呼べる
- [ ] エラー時（DB例外/マイグレーション等）の扱い方針がある

---

## 演習

- [ ] メモの保存先をRoomにし、一覧がDBを監視して更新されるようにする
- [ ] 並び替え条件をDataStoreに保存し、次回起動でも復元する
- [ ] DB例外が起きたときのUI（エラー表示/再試行/復旧）を考える

---

## ふりかえり

- 「DBを直接UIから触らない」理由は何？
- DataStoreは、何を保存すべき/すべきでない？
- オフラインで壊れやすいポイントはどこ？

---

## 次の章

次は `chapters/11-storage.md` に進み、永続化を入れましょう。

