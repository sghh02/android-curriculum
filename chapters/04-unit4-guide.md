# Unit 4: 非同期処理とネットワーク（ガイド）

Unit 4では、実務で必須の **非同期処理（Coroutines/Flow）** と **ネットワーク（Retrofit）** を扱います。「止まらないUI」と「失敗に強い通信」がテーマです。

---

## 前提

- [Unit 3: ナビゲーションとアーキテクチャ（ガイド）](./03-unit3-guide.md) まで完了し、画面遷移とViewModelの骨格がある

## この章でできるようになること

- Coroutine/Flowで、UIを止めずにデータを扱える
- RetrofitでAPIを呼び、成功/失敗/タイムアウトを扱える
- エラー表示とリトライ導線を設計できる

---

## このユニットでやること（レッスン）

- 非同期/データ層：[Kotlin Coroutinesと非同期処理](./09-data-layer.md)
- ネットワーク：[ネットワーク通信（Retrofit）](./10-network.md)

---

## チェックポイント（完了条件）

- [ ] ViewModelからCoroutineで処理を起動し、UI Stateを更新できる
- [ ] 通信失敗時にエラー表示とリトライ導線がある
- [ ] 「どこで例外を握るか」が整理されている（UIまで漏れない）

---

## 演習

- [ ] ダミーAPI（jsonplaceholder等）を想定し、取得→表示の流れを作る（失敗表示も）
- [ ] リトライボタンを作り、連打しても二重リクエストにならないようにする
- [ ] 例外を `Result` / `sealed class` などで表現し、UIまでエラー種別を運ぶ

---

## AIに聞いてみよう

### 質問テンプレ（コピペ）

```text
【前提】
このユニットを進めています（この章のコンテキストは共有済み）。

【いま困っていること】
（例：どの順で進める？ / 演習をチケットに分けたい / 設計の判断をしたい）

【今の状態】
- どこまで終わったか：
- 詰まっている箇所（レッスン/チェックポイント）：
- 関連する実装やログ（必要なら）：

【欲しい回答】
- 次にやること（優先順）
- 理由
- 完了の判断基準（チェックリスト）
```

### 質問例

```text
【質問】
このユニットのレッスンを、週6時間前提で「今週のタスク」に分解して。
読む/実装/動作確認/PRの順で、最小セットを提案して。
```

```text
【質問】
このユニットのチェックポイントを満たせているか、私の現状（説明/スクショ/差分）からレビューして。
足りない点と次の一手も出して。
```

```text
【質問】
演習をPR単位に分割して。各PRの目的、受け入れ条件、確認手順（スクショ/テスト）も書いて。
```

---

## 完了記録

この章には提出課題はありません。
学習が完了したら、スプレッドシートに **完了日** のみ記入してください。

---

## ふりかえり

- suspend関数とFlowの使い分けは？
- エラーは“どこで”扱うのが一番安全？
- リトライは、UXとしてどうあるべき？

---

## 次の章

次は [Kotlin Coroutinesと非同期処理](./09-data-layer.md) に進み、非同期とデータ層から固めましょう。
